// Benchmark boilerplate generated by Benchmark

import Benchmark
import Foundation
import SwiftOwnership

let benchmarks = {
    Benchmark.defaultConfiguration.scalingFactor = .mega
    Benchmark.defaultConfiguration.metrics = [
        .retainCount,
        .releaseCount,
        .retainReleaseDelta,
        .cpuTotal
    ]
    Benchmark("With retain") { benchmark in
        for _ in benchmark.scaledIterations {
            blackHole(doSomethingWithRetain())
        }
    }
    Benchmark("Without retain") { benchmark in
        for _ in benchmark.scaledIterations {
            blackHole(doSomethingWithoutRetain())
        }
    }
}
